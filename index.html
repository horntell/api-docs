<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Horntell API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.min.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","php","ruby","javascript","python"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
        </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>
<pre class="highlight shell"><code><span class="c"># PHP library available at https://github.com/horntell/php-sdk.</span>
<span class="c"># Ruby library available ar https://github.com/horntell/ruby-sdk</span>
<span class="c"># Node library available ar https://github.com/horntell/node-sdk</span>
<span class="c"># Python library available ar https://github.com/horntell/python-sdk</span>
</code></pre>

<p>Welcome to the Horntell API. The API is organized around REST. Our API is designed to have predictable, resource-oriented URLs and uses HTTP response codes to indicate API errors.</p>

<p>We use built-in HTTP features, like HTTP authentication and HTTP verbs, which can be understood by off-the-shelf HTTP clients, and we support cross-origin resource sharing to allow you to interact securely with our API from a client-side web application (though you should remember that you should never expose your secret API key in any public website&rsquo;s client-side code).</p>

<p>JSON will be returned in all responses from the API, including errors (though if you&rsquo;re using API bindings, we will convert the response to the appropriate language-specific object).</p>

<p>We have a library for <a href="https://github.com/horntell/php-sdk">PHP</a>, <a href="https://github.com/horntell/ruby-sdk">Ruby</a>, <a href="https://github.com/horntell/node-sdk">Node</a> and <a href="https://github.com/horntell/python-sdk">Python</a> ready, but making the calls to API in others shouldn&rsquo;t be different than making cURL requests in the language of your choice. The examples are given on the right hand side.</p>

<p>The base URL for all the API requests is: <strong>https://api.horntell.com</strong></p>

<h1 id="authentication">Authentication</h1>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.horntell.com"</span> <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Horntell\App</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="s1">'hornokpleasekey'</span><span class="p">,</span> <span class="s1">'hornokpleasesecret'</span><span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Horntell</span><span class="o">::</span><span class="no">App</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="s1">'hornokpleasekey'</span><span class="p">,</span> <span class="s1">'hornokpleasesecret'</span><span class="p">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">Horntell</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'horntell'</span><span class="p">);</span>
<span class="nx">Horntell</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="s1">'hornokpleasekey'</span><span class="p">,</span> <span class="s1">'hornokpleasesecret'</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">horntell</span>
<span class="n">horntell</span><span class="o">.</span><span class="n">App</span><span class="p">()</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s">'hornokpleasekey'</span><span class="p">,</span> <span class="s">'hornokpleasesecret'</span><span class="p">)</span>
</code></pre>

<p>You authenticate to the Horntell API by providing your API key and secret in the request. You can manage your API key and secret from your account. Your API keys carry many privileges, so be sure to keep them secret!</p>

<p>Authentication to the API occurs via HTTP Basic Auth. Provide your API key as the basic auth username and your API secret as the basic auth password.</p>

<p>All API requests must be made over HTTPS. Calls made over plain HTTP will fail. You must authenticate for all requests.</p>

<p><aside class="notice">
    You must replace <code class="prettyprint">hornokpleasekey</code> with your personal API key and <code class="prettyprint">hornokpleasesecret</code> with your API secret.
</aside></p>

<h1 id="errors">Errors</h1>

<p>Horntell uses conventional HTTP response codes to indicate success or failure of an API request. In general, codes in the 2xx range indicate success, codes in the 4xx range indicate an error that resulted from the provided information (e.g. a required parameter was missing, forbidden usage, etc.), and codes in the 5xx range indicate an error with Horntell&rsquo;s servers.</p>

<h3 id="attributes">Attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td><em><code class="prettyprint">string</code></em> <br /> The type of error returned. Can be <code class="prettyprint">bad_request</code>, <code class="prettyprint">unauthorized</code>, <code class="prettyprint">forbidden</code>, <code class="prettyprint">not_found</code>, <code class="prettyprint">invalid_input</code> or <code class="prettyprint">internal_error</code>.</td>
</tr>
<tr>
<td>code</td>
<td><em><code class="prettyprint">number</code></em> <br /> This code is same as the HTTP status code for the response. It can be <code class="prettyprint">400</code>, <code class="prettyprint">401</code>, <code class="prettyprint">403</code>, <code class="prettyprint">404</code> or <code class="prettyprint">500</code>.</td>
</tr>
<tr>
<td>message</td>
<td><em><code class="prettyprint">string</code></em> <br /> The human readble message to give you more clarity about the error.</td>
</tr>
</tbody></table>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Use SDK for PHP
</span><span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Horntell\Errors\ForbiddenError</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* you were successfully authenticated but not allowed to do what you were trying to do.*/</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Horntell\Errors\NotFoundError</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* the resource you wanted to work with was not found. eg. creating horn for a profile that doesn't exist.*/</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Horntell\Errors\InvalidRequestError</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* any errors (Forbidden, NotFound, etc.) that are thrown due to invalid request extend from this error, and thus, it can be used to catch all such errors instead of catching all of them individually.*/</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Horntell\Errors\AuthenticationError</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* the request couldn't be authenticated properly, please verify your app's credentials in such case.*/</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Horntell\Errors\ServiceError</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* this error is thrown when something wrong goes on Horntell's servers. Ideally, it should never be thrown. But if it does, we are pinged and we get on fixing it immediately.*/</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Horntell\Errors\NetworkError</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* this error is thrown when some network issue arises and the request couldn't be sent to Horntell. Please check your network connection in such case.*/</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Horntell\Errors\Error</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* of course, you can be a little lazy and simply catch just this one error, which is the parent of each of the above errors.*/</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight ruby"><code><span class="k">begin</span>
    <span class="c1"># Use SDK for Ruby</span>
<span class="k">rescue</span> <span class="no">Horntell</span><span class="o">::</span><span class="no">Errors</span><span class="o">::</span><span class="no">ForbiddenError</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="c1"># you were successfully authenticated but not allowed to do what you were trying to do.</span>
<span class="k">rescue</span> <span class="no">Horntell</span><span class="o">::</span><span class="no">Errors</span><span class="o">::</span><span class="no">NotFoundError</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="c1"># the resource you wanted to work with was not found. eg. creating horn for a profile that doesn't exist.</span>
<span class="k">rescue</span> <span class="no">Horntell</span><span class="o">::</span><span class="no">Errors</span><span class="o">::</span><span class="no">InvalidRequestError</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="c1"># any errors (Forbidden, NotFound, etc.) that are thrown due to invalid request extend from this error, and thus, it can be used to catch all such errors instead of catching all of them individually.</span>
<span class="k">rescue</span> <span class="no">Horntell</span><span class="o">::</span><span class="no">Errors</span><span class="o">::</span><span class="no">AuthenticationError</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="c1"># the request couldn't be authenticated properly, please verify your app's credentials in such case.</span>
<span class="k">rescue</span> <span class="no">Horntell</span><span class="o">::</span><span class="no">Errors</span><span class="o">::</span><span class="no">ServiceError</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="c1"># this error is thrown when something wrong goes on Horntell's servers. Ideally, it should never be thrown. But if it does, we are pinged and we get on fixing it immediately.</span>
<span class="k">rescue</span> <span class="no">Horntell</span><span class="o">::</span><span class="no">Errors</span><span class="o">::</span><span class="no">NetworkError</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="c1"># this error is thrown when some network issue arises and the request couldn't be sent to Horntell. Please check your network connection in such case.</span>
<span class="k">rescue</span> <span class="no">Horntell</span><span class="o">::</span><span class="no">Errors</span><span class="o">::</span><span class="no">Error</span> <span class="o">=&gt;</span> <span class="n">error</span>
    <span class="c1"># of course, you can be a little lazy and simply catch just this one error, which is the parent of each of the above errors.</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Sample error callback function</span>
<span class="c1">// Every error object has three methods: getMessage(), getCode(), getType()</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">Horntell</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">ForbiddenError</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* you were successfully authenticated but not allowed to do what you were trying to do.*/</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">Horntell</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">NotFoundError</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* the resource you wanted to work with was not found. eg. creating horn for a profile that doesn't exist.*/</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">Horntell</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">InvalidRequestError</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* any errors (Forbidden, NotFound, etc.) that are thrown due to invalid request extend from this error, and thus, it can be used to catch all such errors instead of catching all of them individually.*/</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">Horntell</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">AuthenticationError</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* the request couldn't be authenticated properly, please verify your app's credentials in such case.*/</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">Horntell</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">ServiceError</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* this error is thrown when something wrong goes on Horntell's servers. Ideally, it should never be thrown. But if it does, we are pinged and we get on fixing it immediately.*/</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">Horntell</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">NetworkError</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* this error is thrown when some network issue arises and the request couldn't be sent to Horntell. Please check your network connection in such case.*/</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">Horntell</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nb">Error</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* of course, you can be a little lazy and simply catch just this one error, which is the parent of each of the above errors.*/</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="k">try</span><span class="p">:</span>
    <span class="c"># Use SDK for Python</span>
<span class="k">except</span> <span class="n">horntell</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">ForbiddenError</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span>
    <span class="c"># you were successfully authenticated but not allowed to do what you were trying to do.</span>
<span class="k">except</span> <span class="n">horntell</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">NotFoundError</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span>
    <span class="c"># the resource you wanted to work with was not found. eg. creating horn for a profile that doesn't exist.</span>
<span class="k">except</span> <span class="n">horntell</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">InvalidRequestError</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span>
    <span class="c"># any errors (Forbidden, NotFound, etc.) that are thrown due to invalid request extend from this error, and thus, it can be used to catch all such errors instead of catching all of them individually.</span>
<span class="k">except</span> <span class="n">horntell</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">AuthenticationError</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span>
    <span class="c"># the request couldn't be authenticated properly, please verify your app's credentials in such case.</span>
<span class="k">except</span> <span class="n">horntell</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">ServiceError</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span>
    <span class="c"># this error is thrown when something wrong goes on Horntell's servers. Ideally, it should never be thrown. But if it does, we are pinged and we get on fixing it immediately.</span>
<span class="k">except</span> <span class="n">horntell</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">NetworkError</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span>
    <span class="c"># this error is thrown when some network issue arises and the request couldn't be sent to Horntell. Please check your network connection in such case.</span>
<span class="k">except</span> <span class="n">horntell</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">Error</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span>
    <span class="c"># of course, you can be a little lazy and simply catch just this one error, which is the parent of each of the above errors.</span>
</code></pre>

<h3 id="handling-errors">Handling Errors</h3>

<p>Our SDKs can throw exceptions/errors for many reasons, like network issues, validation errors, authentication errors, etc. We strongly recommend always trying to gracefully handle these exceptions.</p>

<h1 id="versioning">Versioning</h1>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.horntell.com"</span> <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// it already defaults to v1, so this can be skipped
</span><span class="nx">Horntell\App</span><span class="o">::</span><span class="na">setVersion</span><span class="p">(</span><span class="s1">'v1'</span><span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># it already defaults to v1, so this can be skipped</span>
<span class="no">Horntell</span><span class="o">::</span><span class="no">App</span><span class="p">.</span><span class="nf">set_version</span><span class="p">(</span><span class="s1">'v1'</span><span class="p">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// it already defaults to v1, so this can be skipped</span>
<span class="nx">Horntell</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">setVersion</span><span class="p">(</span><span class="s1">'v1'</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># it already defaults to v1, so this can be skipped</span>
<span class="n">horntell</span><span class="o">.</span><span class="n">App</span><span class="p">()</span><span class="o">.</span><span class="n">set_version</span><span class="p">(</span><span class="s">'v1'</span><span class="p">)</span>
</code></pre>

<p>Horntell allows its API to be backward-compatible, and we allow this using the versioned API. Current version of the API is <code class="prettyprint">v1</code>.</p>

<p>You have to specify the version of the API with each API request in the <code class="prettyprint">Accept:</code> header. The example on the right is using the version <code class="prettyprint">v1</code>. If version is not specified with a request, we will route that request to the latest verion of the API.</p>

<h1 id="hashing">Hashing</h1>
<pre class="highlight shell"><code><span class="c"># not required in shell</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// returns correct uid_hash to be used in JS widget
</span><span class="nx">Horntell\App</span><span class="o">::</span><span class="na">hash</span><span class="p">(</span><span class="nv">$uid</span><span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># returns correct uid_hash to be used in JS widget</span>
<span class="no">Horntell</span><span class="o">::</span><span class="no">App</span><span class="p">.</span><span class="nf">hash</span><span class="p">(</span><span class="n">uid</span><span class="p">);</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// returns correct uid_hash to be used in JS widget</span>
<span class="nx">Horntell</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">uid</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># returns correct uid_hash to be used in JS widget</span>
<span class="n">horntell</span><span class="o">.</span><span class="n">App</span><span class="p">()</span><span class="o">.</span><span class="nb">hash</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
</code></pre>

<p><a href="http://docs.horntell.com/help/articles/how-to-integrate-horntell-center/">Horntell Center</a> needs you to pass a variable called <code class="prettyprint">uid_hash</code> when configuring. This hash is HMAC SHA256 value of the <code class="prettyprint">uid</code> using your app&rsquo;s secret key, and is responsible in making sure that the notifications are loaded for the correct user.</p>

<p>Because the hash is needed to be computed on server side, it becomes quite a task to do so. Thus, our SDKs in various languages provides a handy <code class="prettyprint">hash()</code> method that does it for you. You&rsquo;ll only need to pass in the <code class="prettyprint">uid</code> and the <code class="prettyprint">hash()</code> method will return the correct <code class="prettyprint">uid_hash</code> for that <code class="prettyprint">uid</code>.</p>

<h1 id="profiles">Profiles</h1>

<p>Profiles are the most important object in your app. These objects reflect your users directly (think of them as profiles for your users). Most of the things Horntell allows you to do are dependent on the profiles (after all, they are whom you want to see more engaged in your app).</p>

<h2 id="the-profile-object">The profile object</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53a1626b28d56e6708f9dd35"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720974375"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signedup_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1387977193</span><span class="p">,</span><span class="w">
    </span><span class="s2">"avatar_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/johndoe.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Founder &amp; CEO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Acme, Inc."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"industry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Computer Softwares"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"San Fransisco, USA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"headline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Everyone's example!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1977-02-26"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"custom_attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"first_referral_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1389312000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"earlybird"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"539855de9016382d3b8b07d7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_seen_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1404991674</span><span class="p">,</span><span class="w">
    </span><span class="s2">"campaigns_summary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"53bf732028d56edc0b8b4567"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"first_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1399111810</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1399111810</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1398938219</span><span class="p">,</span><span class="w">
    </span><span class="s2">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total_campaigns"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total_horns"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"segments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"all"</span><span class="p">,</span><span class="w"> </span><span class="s2">"new"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="attributes">Attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><em><code class="prettyprint">string</code></em> <br /> This is the primary identifier that Horntell gives to every profile that is created in the system. This identifier is unique all wide the Horntell.</td>
</tr>
<tr>
<td>app_id</td>
<td><em><code class="prettyprint">string</code></em> <br /> This is the primary identifier for your app to which the profile belongs.</td>
</tr>
<tr>
<td>uid</td>
<td><em><code class="prettyprint">string</code></em> <br /> This is the identifer which is the primary identifier for the user in your app.</td>
</tr>
<tr>
<td>first_name</td>
<td><em><code class="prettyprint">string</code></em></td>
</tr>
<tr>
<td>last_name</td>
<td><em><code class="prettyprint">string</code></em></td>
</tr>
<tr>
<td>email</td>
<td><em><code class="prettyprint">string</code></em></td>
</tr>
<tr>
<td>signedup_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX timestamp at which the user signed up for your app.</td>
</tr>
<tr>
<td>avatar_url</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">url</code></em></td>
</tr>
<tr>
<td>gender</td>
<td><em><code class="prettyprint">string</code></em> <br /> Either <code class="prettyprint">Male</code> or <code class="prettyprint">Female</code>.</td>
</tr>
<tr>
<td>position</td>
<td><em><code class="prettyprint">string</code></em> <br /> The position of the user at his company.</td>
</tr>
<tr>
<td>company</td>
<td><em><code class="prettyprint">string</code></em> <br /> The company where the user works.</td>
</tr>
<tr>
<td>industry</td>
<td><em><code class="prettyprint">string</code></em></td>
</tr>
<tr>
<td>location</td>
<td><em><code class="prettyprint">string</code></em></td>
</tr>
<tr>
<td>headline</td>
<td><em><code class="prettyprint">string</code></em> <br /> The small description/bio about the user.</td>
</tr>
<tr>
<td>birthday</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">yyyy-mm-dd</code></em></td>
</tr>
<tr>
<td>custom_attributes</td>
<td><em><code class="prettyprint">hash</code></em> <br /> The hash of custom key-value pairs.</td>
</tr>
<tr>
<td>last_seen_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX timestamp of the last time the user was seen in your app.</td>
</tr>
<tr>
<td>campaigns_summary</td>
<td><em><code class="prettyprint">object</code></em> <br /> The summary about the campaigns that were fired for the user. Each campaign is summarized in three fields: <code class="prettyprint">count</code>, <code class="prettyprint">first_at</code> and <code class="prettyprint">last_at</code>.</td>
</tr>
<tr>
<td>created_at</td>
<td><em><code class="prettyprint">timestamp</code></em></td>
</tr>
<tr>
<td>stats</td>
<td><em><code class="prettyprint">object</code></em> <br /> This object keeps track of the important data points for the user. The three stats that you&rsquo;ll find here are the <code class="prettyprint">total_campaigns</code>, <code class="prettyprint">total_horns</code>.</td>
</tr>
<tr>
<td>segments</td>
<td><em><code class="prettyprint">array</code></em> <br />  The list of segments to which the user belongs.</td>
</tr>
</tbody></table>

<h2 id="create-a-new-profile">Create a New Profile</h2>

<blockquote>
<p>POST https://api.horntell.com/profiles</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.horntell.com/profiles"</span> <span class="se">\</span>
-X POST <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{"uid": "720974375", "first_name": "John", "last_name": "Doe", "email": "john@example.com", "signedup_at": 1387977193, "gender": "male", "custom_attributes": {"type": "earlybird"}}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="p">(</span><span class="k">new</span> <span class="nx">Horntell\Profile</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'uid'</span> <span class="o">=&gt;</span> <span class="s1">'720974375'</span><span class="p">,</span>
    <span class="s1">'first_name'</span> <span class="o">=&gt;</span> <span class="s1">'John'</span><span class="p">,</span>
    <span class="s1">'last_name'</span> <span class="o">=&gt;</span> <span class="s1">'Doe'</span><span class="p">,</span>
    <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">'john@example.com'</span><span class="p">,</span>
    <span class="s1">'signedup_at'</span> <span class="o">=&gt;</span> <span class="mi">1387977193</span><span class="p">,</span>
    <span class="s1">'gender'</span> <span class="o">=&gt;</span> <span class="s1">'male'</span><span class="p">,</span>
    <span class="s1">'custom_attributes'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'earlybird'</span><span class="p">)</span>
<span class="p">));</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Horntell</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
    <span class="ss">:uid</span> <span class="o">=&gt;</span> <span class="s1">'720974375'</span><span class="p">,</span>
    <span class="ss">:first_name</span> <span class="o">=&gt;</span> <span class="s1">'John'</span><span class="p">,</span>
    <span class="ss">:last_name</span> <span class="o">=&gt;</span> <span class="s1">'Doe'</span><span class="p">,</span>
    <span class="ss">:email</span> <span class="o">=&gt;</span> <span class="s1">'john@example.com'</span><span class="p">,</span>
    <span class="ss">:signedup_at</span> <span class="o">=&gt;</span> <span class="mi">1387977193</span><span class="p">,</span>
    <span class="ss">:gender</span> <span class="o">=&gt;</span> <span class="s1">'male'</span><span class="p">,</span>
    <span class="ss">:custom_attributes</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:type</span> <span class="o">=&gt;</span> <span class="s1">'earlybird'</span><span class="p">}</span>
<span class="p">})</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">Horntell</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="na">uid</span><span class="p">:</span> <span class="s1">'720974375'</span><span class="p">,</span>
    <span class="na">first_name</span><span class="p">:</span> <span class="s1">'John'</span><span class="p">,</span>
    <span class="na">last_name</span><span class="p">:</span> <span class="s1">'Doe'</span><span class="p">,</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'john@example.com'</span><span class="p">,</span>
    <span class="na">signedup_at</span><span class="p">:</span> <span class="mi">1387977193</span><span class="p">,</span>
    <span class="na">gender</span><span class="p">:</span> <span class="s1">'male'</span><span class="p">,</span>
    <span class="na">custom_attributes</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="s1">'earlybird'</span><span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="n">horntell</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">({</span>
    <span class="s">'uid'</span><span class="p">:</span> <span class="s">'720974375'</span><span class="p">,</span>
    <span class="s">'first_name'</span><span class="p">:</span> <span class="s">'John'</span><span class="p">,</span>
    <span class="s">'last_name'</span><span class="p">:</span> <span class="s">'Doe'</span><span class="p">,</span>
    <span class="s">'email'</span><span class="p">:</span> <span class="s">'john@example.com'</span><span class="p">,</span>
    <span class="s">'signedup_at'</span><span class="p">:</span> <span class="mi">1387977193</span><span class="p">,</span>
    <span class="s">'gender'</span><span class="p">:</span> <span class="s">'male'</span><span class="p">,</span>
    <span class="s">'custom_attributes'</span><span class="p">:</span> <span class="p">{</span><span class="s">'type'</span><span class="p">:</span> <span class="s">'earlybird'</span><span class="p">}</span>
<span class="p">})</span>
</code></pre>

<blockquote>
<p>You will get the following in response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720974375"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"signedup_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1404991674</span><span class="p">,</span><span class="w">
        </span><span class="s2">"avatar_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"industry"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"headline"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_seen_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1404991674</span><span class="p">,</span><span class="w">
        </span><span class="s2">"custom_attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"earlybird"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Creates a new profile.</p>

<h3 id="endpoint">Endpoint</h3>

<p><code class="prettyprint">POST https://api.horntell.com/profiles</code></p>

<h3 id="arguments">Arguments</h3>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>uid</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">required</code></em> <br /> The primary identifier for the user in your app.</td>
</tr>
<tr>
<td>first_name</td>
<td><em><code class="prettyprint">string</code></em> <br /> First name of the user in your app.</td>
</tr>
<tr>
<td>last_name</td>
<td><em><code class="prettyprint">string</code></em> <br /> Last name of the user in your app.</td>
</tr>
<tr>
<td>email</td>
<td><em><code class="prettyprint">string</code></em> <br /> The valid email address for the user. This email address is used to send the campaign emails to the profile.</td>
</tr>
<tr>
<td>signedup_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX time at which the user signed up for your app.</td>
</tr>
<tr>
<td>avatar_url</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">url</code></em> <br /> The URL at which the Horntell can find the profile picture for the profile. This makes your dashboard look good.</td>
</tr>
<tr>
<td>gender</td>
<td><em><code class="prettyprint">string</code></em> <br /> Gender can either be <code class="prettyprint">male</code> or <code class="prettyprint">female</code> (all lowercase).</td>
</tr>
<tr>
<td>position</td>
<td><em><code class="prettyprint">string</code></em> <br /> The position at which the user works at his company.</td>
</tr>
<tr>
<td>company</td>
<td><em><code class="prettyprint">string</code></em> <br /> The company at which the user works.</td>
</tr>
<tr>
<td>industry</td>
<td><em><code class="prettyprint">string</code></em> <br /> The industry in which the user works.</td>
</tr>
<tr>
<td>location</td>
<td><em><code class="prettyprint">string</code></em> <br /> The geographical place where the user lives.</td>
</tr>
<tr>
<td>headline</td>
<td><em><code class="prettyprint">string</code></em> <br /> The small description/bio about the user.</td>
</tr>
<tr>
<td>birthday</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">yyyy-mm-dd</code></em> <br /> Happy birthday to you!</td>
</tr>
<tr>
<td>custom_attributes</td>
<td><em><code class="prettyprint">hash</code></em> <br /> The hash of custom key-value pairs. Any arrays and objects will return in an error.</td>
</tr>
</tbody></table>

<p><aside class="notice">
    The more information you put in the profile, the better your account looks.
</aside></p>

<h3 id="custom-attributes">Custom Attributes</h3>

<p>Horntell allows you to add any amount of custom attributes to your profiles to later filter upon. However, the concept of adding custom attributes is simple (simply pass in hash of data), there are a few things to understand to make most out of it.</p>

<p>The true value of custom attributes is extracted when using them in filtering your profiles. You can compare (<code class="prettyprint">starts_with</code>, <code class="prettyprint">contains</code>, etc.) these custom attributes just like the default attributes (<code class="prettyprint">first_name</code>, <code class="prettyprint">gender</code>, etc.). The comparison operators that you get corresponding to each attribute depends on the type of attribute it is. For example, a attribute with data type <code class="prettyprint">number</code> will have comparison operators like <code class="prettyprint">greater than</code>, <code class="prettyprint">less than</code>, which makes no sense when working with <code class="prettyprint">string</code> attributes.</p>

<p>Thus, data type of custom attributes become crucial when it comes to using them for filtering. By default, custom attribute will be considered as a <code class="prettyprint">string</code> and will receive comparison rules for <code class="prettyprint">string</code> attribute. However, using these tips, you can make Horntell comprehend corret data type for your attributes.</p>

<ul>
<li>If an attribute is seen with either of these values <code class="prettyprint">&#39;true&#39;</code> (string), <code class="prettyprint">&#39;false&#39;</code> (string), <code class="prettyprint">true</code> (boolean), <code class="prettyprint">false</code> (boolean), it is considered to be a boolean attribute.</li>
<li>If an attribute&rsquo;s data type is <code class="prettyprint">int</code> or <code class="prettyprint">float</code>, it is considered to be a <code class="prettyprint">number</code> attribute.</li>
<li>If an attribute&rsquo;s data type is <code class="prettyprint">int</code> type and the <code class="prettyprint">key</code> ends with <code class="prettyprint">_at</code> (eg. <code class="prettyprint">account_activated_at</code>), it is assumed to be an UNIX timestamp in UTC, and will be typecasted into <code class="prettyprint">date</code> attribute.</li>
</ul>

<h2 id="update-a-profile">Update a Profile</h2>

<blockquote>
<p>PUT https://api.horntell.com/profiles/{uid}</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># This will update the first name of the profile with the `uid` = 720974375</span>

curl <span class="s2">"https://api.horntell.com/profiles/720974375"</span> <span class="se">\</span>
-X PUT <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{"first_name": "Johnny"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// This will update the first name of the profile with the `uid` = 720974375
</span>
<span class="p">(</span><span class="k">new</span> <span class="nx">Horntell\Profile</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span> <span class="o">=&gt;</span> <span class="s1">'Johnny'</span>
<span class="p">));</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># This will update the first name of the profile with the `uid` = 720974375</span>

<span class="no">Horntell</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="p">{</span>
    <span class="ss">:first_name</span> <span class="o">=&gt;</span> <span class="s1">'Johnny'</span>
<span class="p">})</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">Horntell</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">first_name</span><span class="p">:</span> <span class="s1">'Johnny'</span><span class="p">,</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="n">horntell</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">'720974375'</span><span class="p">,</span> <span class="p">{</span>
    <span class="s">'first_name'</span><span class="p">:</span> <span class="s">'Johnny'</span><span class="p">,</span>
<span class="p">})</span>
</code></pre>

<blockquote>
<p>You will get the following in response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720974375"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnny"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"signedup_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1404991674</span><span class="p">,</span><span class="w">
        </span><span class="s2">"avatar_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"industry"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"headline"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_seen_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1404991674</span><span class="p">,</span><span class="w">
        </span><span class="s2">"custom_attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"earlybird"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following endpoint updates the profile with the new information. The fields that you send with the update request overwrites the older values for the fields.</p>

<p><aside class="warning">
    You cannot modify the <code class="prettyprint">uid</code> of a profile. If you want to update the <code class="prettyprint">uid</code> itself, consider creating a new profile with the new <code class="prettyprint">uid</code>.
</aside></p>

<h3 id="endpoint">Endpoint</h3>

<p><code class="prettyprint">PUT https://api.horntell.com/profiles/{uid}</code></p>

<h3 id="arguments">Arguments</h3>

<table><thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td><em><code class="prettyprint">string</code></em> <br /> First name of the user in your app.</td>
</tr>
<tr>
<td>last_name</td>
<td><em><code class="prettyprint">string</code></em> <br /> Last name of the user in your app.</td>
</tr>
<tr>
<td>email</td>
<td><em><code class="prettyprint">string</code></em> <br /> The valid email address for the user. This email address is used to send the campaign emails to the profile.</td>
</tr>
<tr>
<td>signedup_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX time at which the user signed up for your app.</td>
</tr>
<tr>
<td>avatar_url</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">url</code></em> <br /> The URL at which the Horntell can find the profile picture for the profile. This makes your dashboard look good.</td>
</tr>
<tr>
<td>gender</td>
<td><em><code class="prettyprint">string</code></em> <br /> Gender can either be <code class="prettyprint">male</code> or <code class="prettyprint">female</code> (all lowercase).</td>
</tr>
<tr>
<td>position</td>
<td><em><code class="prettyprint">string</code></em> <br /> The position at which the user works at his company.</td>
</tr>
<tr>
<td>company</td>
<td><em><code class="prettyprint">string</code></em> <br /> The company at which the user works.</td>
</tr>
<tr>
<td>industry</td>
<td><em><code class="prettyprint">string</code></em> <br /> The industry in which the user works.</td>
</tr>
<tr>
<td>location</td>
<td><em><code class="prettyprint">string</code></em> <br /> The geographical place where the user lives.</td>
</tr>
<tr>
<td>headline</td>
<td><em><code class="prettyprint">string</code></em> <br /> The small description/bio about the user.</td>
</tr>
<tr>
<td>birthday</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">yyyy-mm-dd</code></em> <br /> Happy birthday to you!</td>
</tr>
<tr>
<td>custom_attributes</td>
<td><em><code class="prettyprint">hash</code></em> The hash of custom key-value pairs.</td>
</tr>
</tbody></table>

<h2 id="get-a-profile">Get a Profile</h2>

<blockquote>
<p>GET https://api.horntell.com/profiles/{uid}</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># This will fetch the profile with the `uid` = 720974375</span>

curl <span class="s2">"https://api.horntell.com/profiles/720974375"</span> <span class="se">\</span>
-X GET <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span> <span class="se">\</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// This will fetch the profile with the `uid` = 720974375
</span>
<span class="p">(</span><span class="k">new</span> <span class="nx">Horntell\Profile</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># This will fetch the profile with the `uid` = 720974375</span>

<span class="no">Horntell</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// This will fetch the profile with the `uid` = 720974375</span>

<span class="nx">Horntell</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># This will fetch the profile with the `uid` = 720974375</span>

<span class="n">horntell</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">'720974375'</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>You will get the following in response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720974375"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnny"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"signedup_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1404991674</span><span class="p">,</span><span class="w">
        </span><span class="s2">"avatar_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"industry"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"headline"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_seen_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1404991674</span><span class="p">,</span><span class="w">
        </span><span class="s2">"custom_attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"earlybird"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following endpoint fetches the profile against the <code class="prettyprint">uid</code> passed.</p>

<h3 id="endpoint">Endpoint</h3>

<p><code class="prettyprint">GET https://api.horntell.com/profiles/{uid}</code></p>

<h2 id="delete-a-profile">Delete a Profile</h2>

<blockquote>
<p>DELETE https://api.horntell.com/profiles/{uid}</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># This will delete the profile with the `uid` = 720974375</span>

curl <span class="s2">"https://api.horntell.com/profiles/720974375"</span> <span class="se">\</span>
-X DELETE <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span> <span class="se">\</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// This will delete the profile with the `uid` = 720974375
</span>
<span class="p">(</span><span class="k">new</span> <span class="nx">Horntell\Profile</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># This will delete the profile with the `uid` = 720974375</span>

<span class="no">Horntell</span><span class="o">::</span><span class="no">Profile</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// This will delete the profile with the `uid` = 720974375</span>

<span class="nx">Horntell</span><span class="p">.</span><span class="nx">profile</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># This will delete the profile with the `uid` = 720974375</span>

<span class="n">horntell</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">'720974375'</span><span class="p">)</span>
</code></pre>

<p>The following endpoint deletes the profile against the <code class="prettyprint">uid</code> passed. On successful request, it will return a HTTP 204 (No Content) response.</p>

<h3 id="endpoint">Endpoint</h3>

<p><code class="prettyprint">DELETE https://api.horntell.com/profiles/{uid}</code></p>

<h1 id="horns">Horns</h1>

<p>Horns are the notifications in the Horntell&rsquo;s terminology. A horn is the primary way of keeping your users engaged in the app. Horns can be sent to a particular profile or multiple profiles. An horn can be of one of four formats:</p>

<ul>
<li><p><strong>Simple</strong>: Horns of this format do not have anything special about them. They are useful for notifying users about some activity in their account. They cannot interact with these horns. Of course, you can add the links through custom HTML, but we do not take responsibility of their interaction.</p></li>
<li><p><strong>Ask</strong>: Horns of this format provides you ability to add upto 3 buttons for your users to interact with. These can be used to have a single question surveys.</p></li>
<li><p><strong>Link</strong>: Horns of this format provides you the ability to provide a clickable notification, which will take the user to a diffferent page. This format works best for notifications.</p></li>
<li><p><strong>Talk</strong>: Horns of this type comes with an input box under them. Users can type in anything and talk to you directly through the horn. These are very useful to build trust among users or to collect some small pieces of information like their email addresses.</p></li>
</ul>

<p><aside class="notice">
    The easiest way to remember these formats is through the acronym <strong>SALT</strong>, which stands for Simple, Ask, Link, Talk.
</aside></p>

<p><aside class="notice">
    Horns of each of these formats can also be a <strong>Bubble Horn</strong>. Bubble horns are the horns that opens automatically upon being pushed to your users. Bubbles give you power to get better responses against your horns. But as with every other power, it comes with responsibility. If you send too many bubbles, your users might get frustrated, thus, it is advised to keep these for important/urgent things.
</aside></p>

<h2 id="the-horn-object">The horn object</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"552238c4bffebca40c8b4567"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"profile_uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720974375"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trigger"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campaign"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5522354fbffebcf30b8b4567"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"friend_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alley Doe"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"talk"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bubble"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter your email to receive updates from us!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"html"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;We've got a killer roadmap ahead. Want to stay updated?&lt;/p&gt;&lt;p&gt;Your email address please?&lt;/p&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"delivered_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306117</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306116</span><span class="p">,</span><span class="w">
    </span><span class="s2">"read_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306294</span><span class="p">,</span><span class="w">
    </span><span class="s2">"responded_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306294</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306116</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="attributes">Attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><em><code class="prettyprint">string</code></em> <br /> This is the primary key of the horn.</td>
</tr>
<tr>
<td>trigger</td>
<td><em><code class="prettyprint">object</code></em> <br /> Hash of keys (<code class="prettyprint">type</code>, <code class="prettyprint">id</code> and <code class="prettyprint">meta</code>) describing how the horn was triggered. The <code class="prettyprint">type</code> has possible values of <code class="prettyprint">campaign</code> and <code class="prettyprint">manual</code>, while <code class="prettyprint">id</code> contains the primary key of campaign (if <code class="prettyprint">type</code> is <code class="prettyprint">campaign</code>) that triggered it, otherwise <code class="prettyprint">null</code>, and <code class="prettyprint">meta</code> contains the key-value pairs of the meta data that was sent when triggering the campaign that created this horn.</td>
</tr>
<tr>
<td>profile_uid</td>
<td><em><code class="prettyprint">string</code></em> <br /> The <code class="prettyprint">uid</code> of profile, for which this horn was created.</td>
</tr>
<tr>
<td>format</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">required</code></em> <br /> Format of horn among these: <code class="prettyprint">simple</code>, <code class="prettyprint">ask</code>, <code class="prettyprint">link</code> or <code class="prettyprint">talk</code>.</td>
</tr>
<tr>
<td>type</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">required</code></em> <br /> Type of the horn among these: <code class="prettyprint">info</code> (blue), <code class="prettyprint">success</code> (green), <code class="prettyprint">warning</code> (orange), <code class="prettyprint">danger</code> (red).</td>
</tr>
<tr>
<td>text</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">required</code></em> <br /> This is the plain text version of the horn.</td>
</tr>
<tr>
<td>bubble</td>
<td><em><code class="prettyprint">boolean</code></em> <br /> Is this horn, a bubble type?</td>
</tr>
<tr>
<td>html</td>
<td><em><code class="prettyprint">string</code></em> <br /> The HTML version of the horn.</td>
</tr>
<tr>
<td>delivered_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX timestamp when the horn was delivered to the profile.</td>
</tr>
<tr>
<td>seen_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX timestamp when profile sees the horn.</td>
</tr>
<tr>
<td>read_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX timestamp when profile reads the horn.</td>
</tr>
<tr>
<td>responded_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX timestamp when profiles responds to the horn.</td>
</tr>
<tr>
<td>response</td>
<td><em><code class="prettyprint">string</code></em> / <em><code class="prettyprint">object</code></em> <br /> Response to the horn by profile. <br /> <ul><li>When format is <code class="prettyprint">simple</code> and <code class="prettyprint">link</code>, this will be <code class="prettyprint">null</code>.</li> <li>When format is <code class="prettyprint">talk</code>, this will be a <code class="prettyprint">string</code>.</li> <li>When format is <code class="prettyprint">ask</code>, this will be an object with two keys: <code class="prettyprint">type</code> and <code class="prettyprint">text</code>. The <code class="prettyprint">text</code> is the text to the shown on clicked button and <code class="prettyprint">type</code> will be one of these values that denoted the color of clicked button: <code class="prettyprint">default</code> (white), <code class="prettyprint">success</code> (green), <code class="prettyprint">warning</code> (orange), <code class="prettyprint">danger</code> (red).</li></td>
</tr>
<tr>
<td>created_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> UNIX timestamp when the horn was created.</td>
</tr>
</tbody></table>

<h2 id="create-a-new-horn">Create a New Horn</h2>

<blockquote>
<p>POST https://api.horntell.com/profiles/{uid}/horns</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.horntell.com/profiles/720974375/horns"</span> <span class="se">\</span>
-X POST <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'
{
    "format": "link",
    "type": "info",
    "bubble": true,
    "text": "Welcome campaign was fired.",
    "html": "&lt;strong&gt;Welcome&lt;/strong&gt; campaign was fired.",
    "link": "http://example.com/campaigns/welcome",
    "new_window": true
}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="p">(</span><span class="k">new</span> <span class="nx">Horntell\Horn</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">toProfile</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'format'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
    <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'info'</span><span class="p">,</span>
    <span class="s1">'bubble'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s1">'text'</span> <span class="o">=&gt;</span> <span class="s1">'Welcome campaign was fired.'</span><span class="p">,</span>
    <span class="s1">'html'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;strong&gt;Welcome&lt;/strong&gt; campaign was fired.'</span><span class="p">,</span>
    <span class="s1">'link'</span> <span class="o">=&gt;</span> <span class="s1">'http://app.example.com/campaigns/welcome'</span><span class="p">,</span>
    <span class="s1">'new_window'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
<span class="p">));</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Horntell</span><span class="o">::</span><span class="no">Horn</span><span class="p">.</span><span class="nf">to_profile</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="p">{</span>
    <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
    <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="s1">'info'</span><span class="p">,</span>
    <span class="ss">:bubble</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
    <span class="ss">:text</span> <span class="o">=&gt;</span> <span class="s1">'Welcome campaign was fired.'</span><span class="p">,</span>
    <span class="ss">:html</span> <span class="o">=&gt;</span> <span class="s1">'&lt;strong&gt;Welcome&lt;/strong&gt; campaign was fired.'</span><span class="p">,</span>
    <span class="ss">:link</span> <span class="o">=&gt;</span> <span class="s1">'http://app.example.com/campaigns/welcome'</span><span class="p">,</span>
    <span class="ss">:new_window</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="p">})</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">Horntell</span><span class="p">.</span><span class="nx">horn</span><span class="p">.</span><span class="nx">toProfile</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="p">{</span>  
    <span class="na">format</span><span class="p">:</span> <span class="s1">'link'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'info'</span><span class="p">,</span>
    <span class="na">bubble</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Welcome campaign was fired.'</span><span class="p">,</span>
    <span class="na">html</span><span class="p">:</span> <span class="s1">'&lt;strong&gt;Welcome&lt;/strong&gt; campaign was fired.'</span><span class="p">,</span>
    <span class="na">link</span><span class="p">:</span> <span class="s1">'http://app.example.com/campaigns/welcome'</span><span class="p">,</span>
    <span class="na">new_window</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="n">horntell</span><span class="o">.</span><span class="n">Horn</span><span class="p">()</span><span class="o">.</span><span class="n">to_profile</span><span class="p">(</span><span class="s">'720974375'</span><span class="p">,</span> <span class="p">{</span>  
    <span class="s">'format'</span><span class="p">:</span> <span class="s">'link'</span><span class="p">,</span>
    <span class="s">'type'</span><span class="p">:</span> <span class="s">'info'</span><span class="p">,</span>
    <span class="s">'bubble'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">'text'</span><span class="p">:</span> <span class="s">'Welcome campaign was fired.'</span><span class="p">,</span>
    <span class="s">'html'</span><span class="p">:</span> <span class="s">'&lt;strong&gt;Welcome&lt;/strong&gt; campaign was fired.'</span><span class="p">,</span>
    <span class="s">'link'</span><span class="p">:</span> <span class="s">'http://app.example.com/campaigns/welcome'</span><span class="p">,</span>
    <span class="s">'new_window'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="s">'new_window'</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">})</span>
</code></pre>

<blockquote>
<p>You will get the HTTP 204 (No Content) in response for the successful request.</p>
</blockquote>

<h3 id="attributes">Attributes</h3>

<p>The following are the attributes which are same for all formats of horns. There are some extra attributes, for each format of horns, which are discussed below.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>format</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">required</code></em> <br /> It should be one of these: <code class="prettyprint">simple</code>, <code class="prettyprint">ask</code>, <code class="prettyprint">link</code> or <code class="prettyprint">talk</code>.</td>
</tr>
<tr>
<td>type</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">required</code></em> <br /> You can give a color to your horn depending upon the situation. For instance, account expiry warning can be red colored, while simple heads up can be blue colored. The available types are: <code class="prettyprint">info</code> (blue), <code class="prettyprint">success</code> (green), <code class="prettyprint">warning</code> (orange), <code class="prettyprint">danger</code> (red).</td>
</tr>
<tr>
<td>text</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">required</code></em> <br /> This is the plain text version of the horn. We require this to show something in situations where HTML cannot be rendered.</td>
</tr>
<tr>
<td>bubble</td>
<td><em><code class="prettyprint">boolean</code></em> <br /> When set to <code class="prettyprint">true</code>, the horn will be opened automatically when pushed to the user.</td>
</tr>
<tr>
<td>html</td>
<td><em><code class="prettyprint">string</code></em> <br /> When available, this string will be rendered as HTML rather than the <code class="prettyprint">text</code> string. We parse the HTMl and clean it for all XSS attempts. We have a very strict whitelist of the tags that you can use in your html. You have the following tags available to use: <code class="prettyprint">&lt;h1&gt;</code>, <code class="prettyprint">&lt;h2&gt;</code>, <code class="prettyprint">&lt;h3&gt;</code>, <code class="prettyprint">&lt;h4&gt;</code>, <code class="prettyprint">&lt;h5&gt;</code>, <code class="prettyprint">&lt;h6&gt;</code>, <code class="prettyprint">&lt;strong&gt;</code>, <code class="prettyprint">&lt;em&gt;</code>, <code class="prettyprint">&lt;sub&gt;</code>, <code class="prettyprint">&lt;sup&gt;</code>, <code class="prettyprint">&lt;small&gt;</code>, <code class="prettyprint">&lt;code&gt;</code>, <code class="prettyprint">&lt;pre&gt;</code>, <code class="prettyprint">&lt;strike&gt;</code>, <code class="prettyprint">&lt;table&gt;</code>, <code class="prettyprint">&lt;thead&gt;</code>, <code class="prettyprint">&lt;tbody&gt;</code>, <code class="prettyprint">&lt;tfoot&gt;</code>, <code class="prettyprint">&lt;tr&gt;</code>, <code class="prettyprint">&lt;th&gt;</code>, <code class="prettyprint">&lt;td&gt;</code>, <code class="prettyprint">&lt;ul&gt;</code>, <code class="prettyprint">&lt;ol&gt;</code>, <code class="prettyprint">&lt;li&gt;</code>, <code class="prettyprint">&lt;a&gt;</code>, <code class="prettyprint">&lt;img&gt;</code>, <code class="prettyprint">&lt;iframe&gt;</code>.</td>
</tr>
</tbody></table>

<h3 id="special-attributes">Special Attributes</h3>

<p>Each format comes with some extra attributes that allows you to control the interaction of horn with the user. Here we detail the extra attributes that horn of each format can have.</p>

<ul>
<li><strong>Simple</strong></li>
</ul>

<p>There are no extra attributes for this format.</p>

<ul>
<li><strong>Ask</strong></li>
</ul>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>options</td>
<td><em><code class="prettyprint">array</code></em> <em><code class="prettyprint">required</code></em> <br /> It is an array which contains details about the buttons to render for the horn. It can have maximum of 3 elements, where each element can either be a string (text on the button) or be an object with two keys: <code class="prettyprint">type</code> and <code class="prettyprint">text</code>. The <code class="prettyprint">text</code> is the text to the shown on button and <code class="prettyprint">type</code> can be one of these values to denote the color of button: <code class="prettyprint">default</code> (white), <code class="prettyprint">success</code> (green), <code class="prettyprint">warning</code> (orange), <code class="prettyprint">danger</code> (red).</td>
</tr>
</tbody></table>

<ul>
<li><strong>Link</strong></li>
</ul>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>link</td>
<td><em><code class="prettyprint">string</code></em> <em><code class="prettyprint">url</code></em> <em><code class="prettyprint">required</code></em> <br /> It is the URL of the page where the user should be sent to upon clicking.</td>
</tr>
<tr>
<td>new_window</td>
<td><em><code class="prettyprint">boolean</code></em> <br /> When set to <code class="prettyprint">true</code>, the notification created will open the links in new window.</td>
</tr>
</tbody></table>

<ul>
<li><strong>Talk</strong></li>
</ul>

<p>There are no extra attributes for this format.</p>

<h1 id="campaigns">Campaigns</h1>

<p>There&rsquo;s a problem when you hard-code the content of horns in your codebase, commit it and push it to production. The problem is that, if you want to change the content of horns, you&rsquo;ll have to repeat the whole cycle of <strong>code - commit - ship</strong> to get it done. This sucks. And campaigns solve this problem.</p>

<p>Campaigns allow you to keep the horns stored as templates in your account and when you need to send a horn, simply use API endpoint to run a particular campaign. This has two benefits over hard-coding horn&rsquo;s data in the codebase:</p>

<ul>
<li>You can modify horn&rsquo;s content really quickly from your Horntell dashboard - without touching your codebase ever.</li>
<li>The stats to all the horns under one campaign can be seen together for analysis.</li>
</ul>

<p><aside class="success">
    While using campaigns, horn&rsquo;s content can be personalized using placeholders (eg. <code class="prettyprint">{first_name}</code>), which will be parsed and replaced whenever creating horns for a profile.
</aside></p>

<h2 id="run-campaign-for-a-single-profile">Run Campaign for a Single Profile</h2>

<blockquote>
<p>POST https://api.horntell.com/profiles/{uid}/campaigns/{campaign_id}</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.horntell.com/profiles/720974375/campaigns/54afd3259f17f6b9468b4567"</span> <span class="se">\</span>
-X POST <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
-d <span class="s1">'
{
    "meta": {
        "friend_name": "Alley Doe"
    }
}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="p">(</span><span class="k">new</span> <span class="nx">Horntell\Campaign</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">toProfile</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="s1">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'friend_name'</span> <span class="o">=&gt;</span> <span class="s1">'Alley Doe'</span><span class="p">)</span>
<span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Horntell</span><span class="o">::</span><span class="no">Campaign</span><span class="p">.</span><span class="nf">to_profile</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="s1">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="p">{</span><span class="ss">:friend_name</span> <span class="o">=&gt;</span> <span class="s1">'Alley Doe'</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">Horntell</span><span class="p">.</span><span class="nx">campaign</span><span class="p">.</span><span class="nx">toProfile</span><span class="p">(</span><span class="s1">'720974375'</span><span class="p">,</span> <span class="s1">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="p">{</span><span class="na">friend_name</span><span class="p">:</span> <span class="s1">'Alley Doe'</span><span class="p">}</span>
<span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="n">horntell</span><span class="o">.</span><span class="n">Campaign</span><span class="p">()</span><span class="o">.</span><span class="n">to_profile</span><span class="p">(</span><span class="s">'720974375'</span><span class="p">,</span> <span class="s">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="p">{</span><span class="s">'friend_name'</span><span class="p">:</span> <span class="s">'Alley Doe'</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>You will get the HTTP 204 (No Content) in response for the successful request.</p>
</blockquote>

<p>If you&rsquo;ve specified some <strong>meta variables</strong> (using content like this: <code class="prettyprint">{meta.friend_name}</code>) in your campaigns, then, you&rsquo;ll need to pass in the hash of those meta variables with their corresponding values. Horntell will then replace those meta variables with the values passed to create final compiled notification&rsquo;s content.</p>

<p>If there&rsquo;re no meta variables in your campaign&rsquo;s content, you don&rsquo;t need to pass in anything.</p>

<h3 id="attributes">Attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>meta</td>
<td><em><code class="prettyprint">array</code></em> <br /> If your campaign contains meta variables, you&rsquo;ll need to pass the values of those variables when firing the campaign.</td>
</tr>
</tbody></table>

<h2 id="run-campaign-for-a-multiple-profiles">Run Campaign for a Multiple Profiles</h2>

<blockquote>
<p>POST https://api.horntell.com/profiles/campaigns/{campaign_id}</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.horntell.com/profiles/campaigns/54afd3259f17f6b9468b4567"</span> <span class="se">\</span>
-X POST <span class="se">\</span>
-u hornokpleasekey:hornokpleasesecret <span class="se">\</span>
-H <span class="s2">"Accept: application/vnd.horntell.v1+json"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
-d <span class="s1">'
{
    "profile_uids": ["720974375", "720974376", "720974377"],
    "meta": {
        "friend_name": "Alley Doe"
    }
}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="p">(</span><span class="k">new</span> <span class="nx">Horntell\Campaign</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">toProfiles</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s2">"720974375"</span><span class="p">,</span> <span class="s2">"720974376"</span><span class="p">,</span> <span class="s2">"720974377"</span><span class="p">),</span> <span class="s1">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'friend_name'</span> <span class="o">=&gt;</span> <span class="s1">'Alley Doe'</span><span class="p">)</span>
<span class="p">);</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Horntell</span><span class="p">\</span><span class="no">Campaign</span><span class="o">::</span><span class="n">to_profiles</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">"720974375"</span><span class="p">,</span> <span class="s2">"720974376"</span><span class="p">,</span> <span class="s2">"720974377"</span><span class="p">],</span> <span class="s1">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="p">{</span><span class="ss">:friend_name</span> <span class="o">=&gt;</span> <span class="s1">'Alley Doe'</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">Horntell</span><span class="p">.</span><span class="nx">campaign</span><span class="p">.</span><span class="nx">toProfiles</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">"720974375"</span><span class="p">,</span> <span class="s2">"720974376"</span><span class="p">,</span> <span class="s2">"720974377"</span><span class="p">],</span> <span class="s1">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="p">{</span><span class="na">friend_name</span><span class="p">:</span> <span class="s1">'Alley Doe'</span><span class="p">}</span>
<span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">successCallback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="n">horntell</span><span class="o">.</span><span class="n">Campaign</span><span class="p">()</span><span class="o">.</span><span class="n">to_profiles</span><span class="p">(</span>
    <span class="p">[</span><span class="s">"720974375"</span><span class="p">,</span> <span class="s">"720974376"</span><span class="p">,</span> <span class="s">"720974377"</span><span class="p">],</span> <span class="s">'54afd3259f17f6b9468b4567'</span><span class="p">,</span>
    <span class="p">{</span><span class="s">'friend_name'</span><span class="p">:</span> <span class="s">'Alley Doe'</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>You will get the HTTP 204 (No Content) in response for the successful request.</p>
</blockquote>

<p>What if you would want to run a campaign for 100 users? Making 100 API calls is not a good way to do it. Better way is to use this end-point which accepts an array of <code class="prettyprint">profile_uid</code>&rsquo;s and runs the campaign for all of those.</p>

<h3 id="attributes">Attributes</h3>

<p>When running a campaign for multiple profiles, we need these attributes.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>profile_uids</td>
<td><em><code class="prettyprint">array</code></em> <em><code class="prettyprint">required</code></em> <br /> It will be an array of <code class="prettyprint">profile_uid</code>&rsquo;s.</td>
</tr>
<tr>
<td>meta</td>
<td><em><code class="prettyprint">array</code></em> <br /> If your campaign contains meta variables, you&rsquo;ll need to pass the values of those variables when firing the campaign.</td>
</tr>
</tbody></table>

<h1 id="events">Events</h1>

<p>Events are our way of letting your app know about something interesting that has just happened in your account. When an interesting event occurs, we create a new event object. For example, when your user interacts with the app, <code class="prettyprint">horn.responded</code> event is created.</p>

<p>We have a system for sending the events directly to your server, called webhooks. Webhooks are managed in your app&rsquo;s setting. Webhooks are special URLs in your application, to which we will post the event and you can act accordingly.</p>

<h2 id="the-event-object">The event object</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55223976bffebca40c8b4568"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54ffe593bffebc4c048b45a0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horn.responded"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"552238c4bffebca40c8b4567"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"profile_uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720974375"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trigger"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campaign"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5522354fbffebcf30b8b4567"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"talk"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bubble"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter your email to receive updates from us!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"html"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;We've got a killer roadmap ahead. Want to stay updated?&lt;/p&gt;&lt;p&gt;Your email address please?&lt;/p&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"delivered_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306117</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seen_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306116</span><span class="p">,</span><span class="w">
    </span><span class="s2">"read_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306294</span><span class="p">,</span><span class="w">
    </span><span class="s2">"responded_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306294</span><span class="p">,</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306116</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="s2">"pending_webhooks"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
</span><span class="s2">"attempts_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1428306294</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="attributes">Attributes</h3>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td><em><code class="prettyprint">string</code></em> <br /> This is the primary key of the event.</td>
</tr>
<tr>
<td>app_id</td>
<td><em><code class="prettyprint">string</code></em> <br /> This is the identifer of your app for which the event occured.</td>
</tr>
<tr>
<td>type</td>
<td><em><code class="prettyprint">string</code></em> <br /> The type of the event.</td>
</tr>
<tr>
<td>resource</td>
<td><em><code class="prettyprint">object</code></em> <br /> The object that corresponds to the event.</td>
</tr>
<tr>
<td>pending_webhooks</td>
<td><em><code class="prettyprint">number</code></em> <br /> The number of webhooks that are pending to be executed.</td>
</tr>
<tr>
<td>attempts_count</td>
<td><em>`number</em>` <br /> Number of attempts that have been made in total to execute all the webhooks.</td>
</tr>
<tr>
<td>created_at</td>
<td><em><code class="prettyprint">timestamp</code></em> <br /> The timestamp, when the event was created.</td>
</tr>
</tbody></table>

<h2 id="types-of-events">Types of events</h2>

<p>However we are supporting just one event as of now (i.e. <code class="prettyprint">horn.responded</code>), we are adding more events like <code class="prettyprint">profile.created</code>, <code class="prettyprint">profile.updated</code>, etc in near future.</p>

<table><thead>
<tr>
<th>Event</th>
<th>Resource</th>
</tr>
</thead><tbody>
<tr>
<td>horn.responded</td>
<td><em>describes a <a href="#the-horn-object">horn</a></em> <br/> Occurs when your user responds to the horn.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
